<main>
  <div class="lunar-card">
    <!-- Star Elements for Bottom Corners -->
    <div class="star-corner-bottom-left"
      style="position: absolute; bottom: 10px; left: 10px; color: var(--accent-gold); font-size: 2rem; filter: drop-shadow(0 0 5px var(--accent-gold));">
      ✦</div>
    <div class="star-corner-bottom-right"
      style="position: absolute; bottom: 10px; right: 10px; color: var(--accent-gold); font-size: 2rem; filter: drop-shadow(0 0 5px var(--accent-gold));">
      ✦</div>

    <div class="header-title">DATA HELENICA ATUAL</div>

    <div class="date-full">
      {{ todayAthenianDate() }}
    </div>

    <div class="phase-info-container">

      <div class="phase-text">
        <div class="phase-name">{{ currentPhase() }}</div>
        <div class="illumination">Iluminação: {{ illumination() }}</div>
      </div>

      <div class="future-events">
        <div class="event-item">Deipnon em {{ daysToDeipnon() }} dias</div>
        <div class="event-item">
          Noumenia de {{ nextMonth().lat }} ({{ nextMonth().gr}}) em {{ daysToNoumenia() }} dias
        </div>
      </div>
    </div>

    <app-calendar [currentDay]="realCurrentDayNum()" [monthStartDate]="monthStartDate()" [today]="today"
      [monthName]="currentHellenicMonth()" (daySelect)="selectDay($event)" (monthChange)="onMonthChange($event)">
    </app-calendar>

    <div class="year-display">
      <div class="year-gregorian">{{ currentYearGregorian() }}</div>
      <div class="year-attic">{{ currentYearAttic() }}</div>
    </div>
    <div class="selected-date-display">
      Data Selecionada: {{ athenianDate() }}
      <div style="font-size: 0.8em; opacity: 0.8; margin-top: 5px;">{{ gregorianDate() }}</div>

      @if (selectedDedication()) {
      <div class="dedication-box"
        style="margin-top: 15px; padding: 10px; border-top: 1px solid rgba(255, 215, 0, 0.3);">
        <div style="color: var(--accent-gold); font-weight: bold; margin-bottom: 5px;">
          {{ selectedDedication()?.deity }}
        </div>
        @if (selectedDedication()?.description) {
        <div style="font-size: 0.9em; opacity: 0.8; white-space: pre-line;"
          [innerHTML]="selectedDedication()?.description | safeHtml" (click)="handleDescriptionClick($event)">
        </div>
        }

        @if (selectedDedication()?.suggestions) {
        <div style="margin-top: 8px;">
          <h5
            style="margin: 0 0 2px 0; font-size: 0.85em; color: var(--accent-gold); text-transform: uppercase; letter-spacing: 0.5px;">
            Oferendas e Atividades</h5>
          <div style="font-size: 0.9em; opacity: 0.8; white-space: pre-line;">
            {{ selectedDedication()?.suggestions }}
          </div>
        </div>
        }

        @if (showKykeonRecipe()) {
        <div class="recipe-box">
          <div class="recipe-title">Kykeon</div>
          <div style="margin-bottom: 15px;">
            <span class="warning-text">Nota de Segurança Importante:</span>
            Um dos ingredientes do kykeon, poejo (pennyroyal), não deve ser ingerido por mulheres grávidas, pois pode
            causar
            aborto!
          </div>

          <div style="margin-bottom: 10px; font-weight: bold;">Ingredientes:</div>
          <ul style="margin: 0 0 15px 20px; opacity: 0.9;">
            <li>4 xícaras de água</li>
            <li>2 colheres de sopa cheias de poejo seco</li>
            <li>2 colheres de sopa de mel</li>
            <li>2/3 xícara de farinha de cevada</li>
            <li>1/4 xícara de sêmola (ou farinha de trigo fina)</li>
          </ul>

          <div style="margin-bottom: 10px; font-weight: bold;">Instruções:</div>
          <div style="opacity: 0.9;">
            Ferva a água. Adicione o poejo e cozinhe em fogo brando por 10 min.
            Adicione o mel e cozinhe por mais 5 min. Coe a erva e descarte.
            Retorne o líquido ao fogo e misture a farinha de cevada aos poucos para evitar grumos.
            Misture a sêmola da mesma maneira. O resultado será um mingau fino e liso.
            Se a mistura ficar muito grossa para beber, misture um pouco de água quente.
          </div>

          <div class="recipe-source">
            Fonte: Campbell, Drew. Old Stones, New Temples: Ancient Greek Paganism Reborn. Xlibris, pp. 304-305.
          </div>
        </div>
        }

        @if (showKathiskosRecipe()) {
        <div class="recipe-box">
          <div class="recipe-title">Veja como fazer um kathiskos hoje:</div>

          <div style="margin-bottom: 10px; opacity: 0.9;">
            Escolha um pote novo e limpo, com uma tampa que vede firmemente. O pote pode ser feito de qualquer material
            à prova d'água - latas também funcionam bem. (Cuidado: o conteúdo do pote pode fermentar ou apodrecer e, se
            o jarro não estiver bem selado, você corre o risco de estragar suas outras comidas com bolor. E, no mínimo,
            ele vai feder.)
          </div>

          <div style="margin-bottom: 10px; opacity: 0.9;">
            Ponha uma pequena quantidade de azeite de oliva no pote junto com um pouco de comida que a família tiver.
            Isso pode incluir uma pitada de farinha, pedaços pequenos de fruta, arroz, lentilha, mel, ervas e/ou
            chocolate. Encha o pote até o topo com água. Você decide que tipo de água usar, se água de torneira, de rio,
            mineral engarrafada etc. Feche vedando bem o pote com a tampa.
          </div>

          <div style="opacity: 0.9;">
            Opcional: amarre fios brancos e amarelos em torno da tampa ou das alças do pote. Você pode amarrar uma
            pequena imagem de Zeus Ktesios em volta da tampa do pote ou pintar uma cobra no pote. O Kathiskos é pessoal
            do seu lar, então variações são bem-vindas.
          </div>
        </div>
        }
      </div>
      }
    </div>

  </div>
</main>
<router-outlet />